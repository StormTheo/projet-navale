/*
 * Test de la classe GestionInterface
 * TestGestionInterface.java                                        01/17
 */
package files.tests;

import files.Affichage;

import java.util.Scanner;


/**
 * Classe qui contient une fonction main permettant de tester les différentes
 * méthodes de la classe GestionInterface :
 *    - affichage et saisie de l'option pour les 3 menus
 *    - saisie du mot de passe
 *    - saisie du nom d'un arrêt de bus
 *    - saisie du nom d'une ligne de bus
 * @author INFO1 Semestre 2
 * @version 1.0
 *
 */
public class TestGestionInterface {
    
    
    /** Objet Scanner pour effectuer les saisies au clavier */
    private static Scanner entree = new Scanner(System.in);
    
    /**
     * Nombre de répétitions des tests réalisés plusieurs fois
     */
    private static int NB_TEST = 3;
    
    
   /********************   2 méthodes outils pour gérer les tests   ******************/
    
    
    /**
     * Demande à l'utilisateur d'appuyer sur entrée pour continuer
     */
    private static void continuer() {
        System.out.println("\n\n\nAppuyer sur entrée pour continuer les tests.") ;
        entree.nextLine();
        System.out.println("\n\n");
    }
    
    
    /**
     * Affiche le résultat d'un test : le nombre de tests réussis et le 
     * nombre de tests total
     * @param nbTestTotal       nombre total de tests effectués
     * @param nbTestOk          nombre de tests réussis
     */
    private static void afficherResultatTest(int nbTestTotal, int nbTestOk) {
        System.out.println(nbTestOk + " test(s) ont réussi sur un total de "
                + nbTestTotal + " tests réalisés.\n   ==>  "
                + ((nbTestOk == nbTestTotal) ?
                        "Tous les tests sont OK" 
                        : "Au moins un test a échoué.") + "\n");
    }
    
    
    
    
    /* ********************   test unitaire de la méthode générale   ************** */
    /*                    qui vérifie si une option de menu est correcte            */                   
    
    
    /** 
     * Test de la méthode reponseValide  (test automatique)
     */
    public static void testReponseValide() {        
        // listes des options valides
        final char[] OPTION_VALIDE = { 'a', 't', 'c', 'm', 'e', 's', '?', 'q'};
        
        // liste de réponses incorrectes que l'utilisateur pourrait donner
        final String[] VALEUR_INCORRECTE = {"b",  "B", "h",  "H", "", "Ajouter", "A A",
                                           " a", "help", "t+", "*" , "ee", " e", "e ",
                                           " M"};
        
        // liste de toutes les réponses correctes
        final String[] VALEUR_CORRECTE = {"a",  "t", "c",  "m", "e", "e", "?", "q"};
                
        int nbTestCorrect;    // nombre de tests réussis
        
        System.out.println ("TEST : méthode reponseValide (test automatique)\n"
                + "-----------------------------------------------");
        
        // Etape 1 : test avec des valeurs correctes
        System.out.println("========> Etape 1/2 - Tests avec des valeurs correctes \n");
        nbTestCorrect = 0;
        for(int i = 0; i < VALEUR_CORRECTE.length; i++) {
            if (! GestionInterface.reponseValide(VALEUR_CORRECTE[i], OPTION_VALIDE)) {
                System.out.println("Erreur - L'option " + VALEUR_CORRECTE[i] 
                                   + " a été considérée comme invalide.");
            } else {
                nbTestCorrect++;
            }
           
        }
        afficherResultatTest(VALEUR_CORRECTE.length, nbTestCorrect);
                    
        // Etape 2 : test avec des valeurs incorrectes
        System.out.println("\n========> Etape 2/2 - Tests avec des valeurs incorrectes \n");
        nbTestCorrect = 0;
        for(int i = 0; i < VALEUR_INCORRECTE.length; i++) {
            if ( GestionInterface.reponseValide(VALEUR_INCORRECTE[i], OPTION_VALIDE)) {
                System.out.println("Erreur - L'option " + VALEUR_INCORRECTE[i] 
                                   + " a été considérée comme valide.");
            } else {
                nbTestCorrect++;
            }            
        }
        afficherResultatTest(VALEUR_INCORRECTE.length, nbTestCorrect);        
        continuer();    
    }    
    
    
    /* *********************   méthodes de tests unitaires   ********************** */
    /*                            pour le menu principal                            */
    
    /** 
     * Test de la méthode afficherAide qui affiche l'aide en ligne (test visuel)
     */
    public static void testAfficherAide() {
        System.out.println ("TEST : méthode afficherAide (test visuel)\n"
                + "-----------------------------------------\n");
        GestionInterface.afficherAide(GestionInterface.TEXTE_AIDE_MENU_PRINCIPAL);
        continuer();
    }
    

    /** 
     * Test de la méthode afficherMenuPrincipal qui affiche le menu principal (test visuel)
     */
    public static void testAfficherMenuPrincipal() {
        System.out.println ("TEST : méthode afficherMenuPrincipal (test visuel)\n"
                + "-------------------------------------------------\n");
        GestionInterface.afficherMenuPrincipal();
        continuer();
    }
     
    /**
     * Test de la méthode saisirOptionMenuPrincipal (test interactif)
     */
    public static void testSaisirOptionMenuPrincipal() {
        char option;        // option saisie pour le menu
        
        System.out.println ("TEST : méthode saisirOptionMenuPrincipal (test interactif "
                            + "recommencé " + NB_TEST + " fois)\n--------------------"
                            + "------------------------------------------------------");
        for (int i = 1; i <= NB_TEST; i++) {
            System.out.println("TEST NUMERO " + i + "\n");
            option = GestionInterface.saisirOptionMenuPrincipal();  
            System.out.println("\n\nPOUR LE TEST NUMERO " + i 
                               + " C'EST L'OPTION " + option
                               + " QUI A ETE CHOISIE.\n\n");
        }
        continuer();
    }
    
    
    /* *********************   méthodes de tests unitaires   ********************** */
    /*                            pour le menu voyageur                             */
     
   
    /** 
     * Test de la méthode afficherMenuVoyageur qui affiche le menu du voyageur (test visuel)
     */
    public static void testAfficherMenuVoyageur() {
        System.out.println ("TEST : méthode afficherMenuVoyageur (test visuel)\n"
                + "-------------------------------------------------\n");
        GestionInterface.afficherMenuVoyageur();
        continuer();
    }
    
    /**
     * Test de la méthode saisirOptionMenuPrincipal (test interactif)
     */
    public static void testSaisirOptionMenuVoyageur() {
        char option;        // option saisie pour le menu
        
        System.out.println ("TEST : méthode saisirOptionMenuPrincipal (test interactif "
                            + "recommencé " + NB_TEST + " fois)\n--------------------"
                            + "------------------------------------------------------");
        for (int i = 1; i <= NB_TEST; i++) {
            System.out.println("TEST NUMERO " + i + "\n");
            option = GestionInterface.saisirOptionMenuVoyageur();  
            System.out.println("\n\nPOUR LE TEST NUMERO " + i 
                               + " C'EST L'OPTION " + option
                               + " QUI A ETE CHOISIE.\n\n");
        }
        continuer();
    }
    
    /* *********************   méthodes de tests unitaires   ********************** */
    /*                         pour le menu administrateur                          */
     
    
    /** 
     * Test de la méthode afficherMenuAdministrateur qui affiche le menu du voyageur (test visuel)
     */
    public static void testAfficherMenuAdministrateur() {
        System.out.println ("TEST : méthode afficherMenuAdministrateur (test visuel)\n"
                + "-------------------------------------------------\n");
        GestionInterface.afficherMenuAdministrateur();
        continuer();
    }
    
    /**
     * Test de la méthode saisirOptionMenuAdministrateur (test interactif)
     */
    public static void testSaisirOptionMenuAdministrateur() {
        char option;        // option saisie pour le menu
        
        System.out.println ("TEST : méthode saisirOptionMenuAdministrateur (test interactif "
                            + "recommencé " + NB_TEST + " fois)\n--------------------"
                            + "------------------------------------------------------");
        for (int i = 1; i <= NB_TEST; i++) {
            System.out.println("TEST NUMERO " + i + "\n");
            option = GestionInterface.saisirOptionMenuAdministrateur();  
            System.out.println("\n\nPOUR LE TEST NUMERO " + i 
                               + " C'EST L'OPTION " + option
                               + " QUI A ETE CHOISIE.\n\n");
        }
        continuer();
    }
    
    
    
    /* *********************   méthodes de tests unitaires   ********************** */
    /*      pour les saisies : mot de passe, nom d'arrêt,  identifiant de ligne     */
     
    
    /** 
     * Test de la méthode saisirMotDePasse (test visuel)
     */
    public static void testSaisirMotDePasse() {
        boolean saisieCorrecte;    // vrai ssi la saisie du mot de passe est
                                   // correcte (au plus tard à la 5ème tentative)
        System.out.println ("TEST : méthode saisirMotDePasse (test visuel)\n"
                + "---------------------------------------------\n"
                + "Vous allez saisir " + NB_TEST + " fois un mot et vérifier "
                + "visuellement que la méthode effectue correctement la saisie.\n"
                + "N'hésitez pas à commettre des erreurs de saisie.");

        // on recommence plusieurs fois la saisie d'un horaire
        for (int i = 0; i < NB_TEST; i++) {
            System.out.println("\nSaisie numéro " + (i + 1)
                               + ". Le mot de passe correct est iutbus" + i + " :");
            saisieCorrecte = GestionInterface.saisirMotDePasse("iutbus" + i);
            if (saisieCorrecte) {
                System.out.println("\nLe mot de passe a été correctement saisi.");
            } else {
                System.out.println("\nAu bout de 5 tentatives le mot de passe "
                                   + "n'a pas été saisi correctement"); 
            }
        }
        continuer();
    }
    
	/** 
     * Test de la méthode saisirNomArret (test visuel)
     */
	public static void testsaisirNomArret() {
        String saisieArret;    
		
        System.out.println ("TEST : méthode saisirNomArret (test visuel)\n"
                + "---------------------------------------------\n"
                + "Vous allez saisir " + NB_TEST + " fois un mot et vérifier "
                + "visuellement que la méthode effectue correctement la saisie.\n"
                + "N'hésitez pas à commettre des erreurs de saisie.");

        // on recommence plusieurs fois la saisie
        for (int i = 0; i < NB_TEST; i++) {
            System.out.println("\nSaisie numéro " + (i + 1)
                               + " :");
            saisieArret = GestionInterface.saisirNomArret();
			System.out.println("\nLa saisie enregistrée est : " + saisieArret);
        }
        continuer();
    }
    
    /** 
     * Test de la méthode saisirNomLigne (test visuel)
     */
	public static void testsaisirNomLigne() {
        String saisirLigne;    
		
        System.out.println ("TEST : méthode saisirNomArret (test visuel)\n"
                + "---------------------------------------------\n"
                + "Vous allez saisir " + NB_TEST + " fois un mot et vérifier "
                + "visuellement que la méthode effectue correctement la saisie.\n"
                + "N'hésitez pas à commettre des erreurs de saisie.");

        // on recommence plusieurs fois la saisie
        for (int i = 0; i < NB_TEST; i++) {
            System.out.println("\nSaisie numéro " + (i + 1)
                               + " :");
            saisirLigne = GestionInterface.saisirNomLigne();
			System.out.println("\nLa saisie enregistrée est : " + saisirLigne);
        }
        continuer();
    }
    
    
    
    
    
    /**
     * Programme principal. Point d'entrée pour lancer les tests
     * @param args  argument non utilisé
     */
    public static void main(String[] args) {
        System.out.println("-----------------------------------------------\n"
                + "     TESTS DE LA CLASSE  GESTION INTERFACE   \n"
                + "-----------------------------------------------\n");
        
        // testReponseValide();
        
        // testAfficherAide();
        // testAfficherMenuPrincipal();
        // testSaisirOptionMenuPrincipal();
        // testSaisirOptionMenuVoyageur();
        // testsaisirNomLigne();       
		// testSaisirOptionMenuAdministrateur();
    }
}
